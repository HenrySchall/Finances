# Quant Research 

pacotes 
riskfolio
pyfolio
zipline
Quantreo

Modelos de séries temporais
- ARIMA, GARCH, EGARCH, TGARCH – previsões de retornos ou volatilidade.
- VAR / SVAR / Bayesian VAR – analisar interações entre vários ativos ou variáveis macroeconômicas.
- Modelos de alta frequência (ex.: modelos de ponto de ocorrência) – para dados intradiários.

Modelos de precificação
- Black-Scholes-Merton – opção europeia.
- Modelos de Difusão Estocástica (GBM)
- Binomial / Trinomial trees – opções exóticas ou americanas.
- Modelos de volatilidade estocástica (ex.: Heston, SABR) – volatilidade também é aleatória.
- Modelos de saltos (ex.: Merton Jump-Diffusion) – capturam movimentos bruscos.

Modelos de risco
- VaR (Value at Risk) – perda máxima esperada num nível de confiança.
- Expected Shortfall – perda média além do VaR.
- Stress testing – simulação de cenários extremos.
- Expected Shortfall (ES ou CVaR)
- Modelo de Markowitz (fronteira eficiente)
- Risk Parity, Minimum Variance, Maximum Diversification

Modelos de fatores (retorno esperado)
- CAPM – um fator de risco (mercado).
- APT
- Fama-French 3 ou 5 fatores – incluem valor, tamanho, investimento, rentabilidade.
- APT (Arbitrage Pricing Theory) – vários fatores macro ou estatísticos.

Modelos de curva de juros
- Vasicek, CIR – modelos de fator único para taxas de juros.
- Hull-White – permite melhor ajuste à curva inicial.
- Libor Market Model / SABR – usados em derivativos de taxa de juros.

Modelos Matemáticos e Estocásticos
Processos de Itô, Browniano, Lévy
Controle estocástico (ex.: Optimal Execution, Almgren-Chriss)
Cálculo estocástico aplicado à precificação e hedging
Modelos de cointegração para arbitragem estatística

Modelos de Alta Frequência (HFT)
Modelos de microestrutura de mercado
Modelos de previsão de ordem-livro
Market making algorítmico e arbitragem de latência

- https://www.coursera.org/specializations/investment-portolio-management
- https://fkpartners.com/loja/alocacao-de-ativos-e-rebalanceamento-de-carteiras-ancord/
- https://analisemacro.com.br/curso/mercado-financeiro-e-gestao-de-portfolios-usando-python/
- https://medium.com/@fabiomt/como-calcular-o-value-at-risk-e-gerar-o-backtesting-em-python-aa39af5c3381
- https://www.youtube.com/watch?v=YIgU4L-yInM&list=PLr_FMpawrcaHgCfDGIwxBFc0imGk2U3Mb
- https://www.youtube.com/watch?v=7GGrt3-rRH8&list=PLCAhGm8nJ9CBn51o0x3j1p1LuMRqpeqCy
- https://hotmart.com/pt-br/marketplace/produtos/projetos-python-para-o-mercado-financeiro/T95872287T
- https://hotmart.com/pt-br/marketplace/produtos/biblioteca-quant/E98052942B
- https://youtube.com/playlist?list=PLCAhGm8nJ9CBn51o0x3j1p1LuMRqpeqCy
- https://youtube.com/playlist?list=PLrYvCXsKilY2waPFWYACDOikg1SxhgxPu
- https://www.quiverquant.com/
- https://www.youtube.com/watch?v=Pa3djq9HU5U&list=PLTXt_K9bOTBpIVLDGli-FLkTtckgrRWvD
- https://www.youtube.com/watch?v=DEWM8wf1D24
- https://www.youtube.com/watch?v=Ets0xGCjQ14
- https://www.youtube.com/watch?v=EeSrQdab0s0&list=PLgWn81pQ2CNKcuUgFosE5YlfJvIZmbVG8
- https://www.udemy.com/course/python-para-investimentos-na-bolsa-de-valores/?campaigntype=Search&portfolio=Brazil&language=PT&product=Course&test=&audience=DSA&topic=Python&priority=Alpha&funnel=Conversion&matchtype=&gad_campaignid=21486848853&couponCode=2021PM25

https://www.ebook.openquants.com/
https://github.com/HULLZHU/CQF-1
https://github.com/eightsmile/cqf
https://gitlab.com/xxpeterxx/CQF/tree/master/Module%201%20Building%20Blocks%20of%20Quant%20Finance
https://github.com/virattt/ai-hedge-fund
https://www.quantconnect.com/

![458578311-26a5d2a5-696a-434a-8378-92a4ef5ad936](https://github.com/user-attachments/assets/e74ce0b7-4777-49a3-87d0-d6cd166f50d5)
![458578326-73869b0c-5c61-4a32-b5c0-15c7bbab8bc1](https://github.com/user-attachments/assets/21d94bc5-2107-4721-b93c-3e0d26797153)
![458578318-462a336e-b25f-4459-8a4c-dbfe77b4ceff](https://github.com/user-attachments/assets/1b4b8f9e-8887-42af-bae5-0fb1b4a1b995)
![458578301-431a1e44-99d9-4cd3-b575-8c823af4b033](https://github.com/user-attachments/assets/37d874e4-5780-4812-b677-5e515585feda)
![Captura de tela 2025-07-07 201911](https://github.com/user-attachments/assets/0ee7ffad-4384-4eb3-962a-f2b898bea0d6)

#### Seguros
- https://atuaria.github.io/portalhalley/notas_TR.html
- https://atuaria.github.io/portalhalley/notas_ICA.html

#### Créditos e Fraude
- https://www.datacamp.com/courses/credit-risk-modeling-in-python
- https://corporatefinanceinstitute.com/resources/commercial-lending/credit-risk-analysis-models/
- https://educacao-executiva.fgv.br/cursos/online/curta-media-duracao-online/credito-e-risco
- https://www.udemy.com/course/fraud-detection-fraud-analytics-risk-management/?couponCode=LOCLZDOFFPBRCTRL
- https://www.udemy.com/course/payment-risk-and-payment-fraud-data-science-and-analytics/?couponCode=LOCLZDOFFPBRCTRL
- https://www.datacamp.com/courses/fraud-detection-in-python
- https://febrabaneducacao.com.br/cursos/ead/ead-de-credito-e-gerenciamento-de-riscos-na-recuperacao-de-credito


### Growth rate 
> Reflects how much we multiply our capital by the value on the purchase date. To calculate it, we will use the normalized asset values, that is, dividing the closing price of each day by the initial purchase price..
 
### Taxa de Retorno Simples
> A taxa de retorno simples é uma métrica financeira utilizada para avaliar a rentabilidade de um investimento ao longo de um período de tempo específico, ela é utilizada quando se quer **comparar ações distintas**.

$RS = (pf + div) - pi/(pi) * 100$

- pf = Preço Final
- pi = Preço Inicial
- div = dividendos do período 

#### Exemplo: 

TOTS3
- pi = R$ 27,93
- qi = 100 (quantidade de compra)
- pf = R$ 35,73
- qf = 100 (quantidade de venda)
- div = 0,25 
- Corretagem = 10,0

> $100 * 27,93 = 2.793$ 
> 
> $100 * 35,73 = 3.573$
> 
> $100 * 0,25 = 25,00$
> 
> $Lucro = (3.573 + 25,00) - 2.793 - 10,0 = 795,00$
> 
> $RS = (3.573 + 25 - 10) - (2.793 + 10)/(2.793 + 10) * 100$ -> 28,0% 

### Taxa de Retorno Logaritmica
> Também conhecida como taxa de retorno contínuo. Assim como a taxa de retorno simples, ela avalia a rentabilidade de um investimento ao longo de um período de tempo específico, sendo utilizada quando se quer **comparar a mesma ações em períodos diferentes**.

$RL = log⁡(pf/pi)* 100$

- pf = Preço Final
- pi = Preço Inicial
- div = dividendos do período 

#### Exemplo: 

TOTS3
- pi = R$ 27,93
- qi = 100 (quantidade de compra)
- pf = R$ 35,73
- qf = 100 (quantidade de venda)
- div = 0,25 
- Corretagem = 10,0

> $100 * 27,93 = 2.793$ 
> 
> $100 * 35,73 = 3.573$
> 
> $100 * 0,25 = 25,00$
> 
> $Lucro = (3.573 + 25,00) - 2.793 - 10,0 = 795,00$
> 
> $RS = log(3.573 + 25 - 10)/(2.793 + 10) * 100$ -> 24,69% 

### Taxa de Retorno Carteira

Pesos de cada Ativo:
- TOTS3 = 0,5
- WEGE3 = 0,5

> $27,47 * 0,5$ -> 13,73%
> 
> $11,17 * 0,5$ -> 5,58% 

Retorno da Carteira = 13,73 + 5,58 -> 19,31%

#### Coeficiente de variação (CV) 
> Mede estatisticamente a dispersão relativa, risco por unidade de retorno. Quanto maior o CV, maior o risco. É muito útil na comparação dos riscos de ativos com retornos esperados diferentes

$CV = σ/RS$

- RS -> Retorno Esperado
- σ -> Desvio Padrão

![Captura de tela 2024-09-13 151633](https://github.com/user-attachments/assets/f8157733-2f1c-42e0-aeee-7fb28689b558)

## Risk
> As decisões financeiras são tomadas em um ambiente de incerteza com relação ao futuro. Toda vez que uma situação de incerteza puder ser quantificada por meio de uma distribuição de probabilidades dos resultados possíveis, diz-se que a decisão está sendo tomada sob uma situação de risco. Aideia de risco está associada às probabilidades de determinado resultado ficar abaixo do valor esperado de uma variável.  Sendo assim, o risco é representado pela variabilidade dos valores observados em torno do valor esperado da distribuição, ou seja, da dispersão dos resultados em relação à média.

#### Comportamento em Relação ao Risco
-  Indiferente ao Risco: o retorno exigido não varia quando o nível de risco aumenta
-  Avesso ao Risco: o retorno exigido aumenta quando o risco se eleva. Exige um retorno mais elevado para compensar a elevação do risco.
-  Propenso ao Risco (risk lover): o retorno exigido cai quando o nível de risco aumenta. Está disposto a abrir mão de algum retorno para assumir maiores riscos.

#### Risco sistemático & Risco não sistemático

- Risco sistemático: É inerente e determinado por eventos externos à empresa, ou seja, mudança diária no preço das ações, devido a eventos como: recessão da economia, comportamento do cliente. **(Não pode ser eliminado e pode afetar todas as empresas)**
- Risco não sistemático: identificado nas características do próprio ativo (intrínseco), ou seja, eventos específicos da estrutura da empresa (depende do tipo de empresa).

#### Variância (σ²)
> Quantifica o quanto os retornos se diferem em relação a média dos retornos (variabilidade). É
obtida pelo somatório dos quadrados dos retornos subtraido pelo retorno médio esperado de cada ativo.

#### Covariância (σ)
> Medida não padronizada do grau de relacionamento de duas variáveis, ou seja, o grau de dispersão dos resultados em relação à média.
- Cov = + -> relação direta / mesma direção.
- Cov = - -> relação inversa / direção contrária.
- Cov = 0 -> nãohárelaçãoentreosdois retornos.

#### Correlação 
> Medida padronizada da relação entre duas séries de valores (retornos). Explica o grau / intensidade de relacionamento dessas séries (coeficiente de correlação).

- Correlação Positiva: duas séries variam na mesma direção.
- Correlação Negativa: duas séries variam em direções opostas

> Quanto menor for o valor da covariância / correlação, menor o grau de dependência das variáveis. A probabilidade de se reduzir o risco é aumentada com a combinação de ativos com covariância / correlação negativa

#### Índice de Treynor (IS)
> Indica o prêmio de risco esperado ou observado por unidade de risco, ou seja, para cada unidade de risco, tem-se x% de prêmio de risco. Sendo assim quanto maior, maior o prêmio de risco (melhor é).

$IS = Rn - Rf / σ$ 

- Rn = Retorno esperado do Ativo n
- Rf = Retorno esperado do Ativo Livre de Risco
- σ =  Risco do ativo n

## Teoria do Portolio 
> Levando em conta a Hipótese dos Mercados Eficientes (HME), ou seja, aquela em que os preços refletem as informações disponíveis e apresentam grande sensibilidade a novas informações relevantes. O valor de um ativo é reflexo do consenso dos participantes com relação ao seu desempenho esperado, sendo assim, nenhum investidor é capaz de identificar ativos com preço em desequilíbrio e todos os investidores são racionais e, portanto,
têm aversão ao risco, optando sempre por investir em carteiras, e não em ativos individuais (diversificando parte do risco inerente à situação em que se coloca todo o dinheiro em um único ativo).
>  A teoria do Portfolio trata da composição de uma carteira ótimade ativos, tendo por objetivo maximizar a utilidade do investidor pela relação risco/retorno. Um único ativo, sofrerá todas as consequências de um mau
desempenho.Isso não ocorrerá com um investidor que aplicar em uma carteira diversificada de ativos

O objetivo do gestor financeiro é criar uma carteira eficiente,
que maximize o retorno para certo nível de risco ou minimize o
risco para determinado nível de retorno

![image](https://github.com/HenrySchall/Finance/assets/96027335/3af52f76-c600-46f1-9489-544b30fbfa77)

## CAPM (Capital Asset Pricing Model)
> É um modelo que determina uma taxa de retorno esperada, para um ativo ou de um portfólio de ativos, considerando um mercado em equilíbrio (perfeito), com o risco não diversificável (de mercado), via coeficiente beta ($\beta1$).

$Rn = Rf + \beta1 * (Rm - Rf)$

- Rn = Retorno esperado
- Rf = Risk Free (Ativo Livre de Risco)
- $\beta1$ = beta da empresa
- Rm = Risco de Mercado

> $\beta1$ É uma medida do risco sistemático de um ativo, isto é, a reação do retorno do ativo às reações na carteira de mercado. Determinado pela seguinte fórmula: 

$\beta = (Cov (Rn,Rm)/(σ^2 Rm)$

- $(Cov (Rn,Rm)$ -> Covariância dos retornos da ação com os retornos do mercado
- $(σ^2 Rm)$ -> Variância do mercado
  
Interpretação do Beta 
- B > 1 -> Agressivo
- B < 1 -> Defensivo
- B = 1 -> Neutro ou Beta do Mercado
- B < 0 -> Contrário ao Mercado
- B = 0 -> Ativo Livre de Risco
  
![foto_page-0001](https://github.com/HenrySchall/Finance/assets/96027335/6f11e3dd-7199-4cb8-902e-77f3fb7d54fc)

##### Índice de Sharpe (IT)
> Indica o prêmio de risco esperado ou observado por unidade de risco sistemático (medido pelo $\beta1$). Sendo assim quanto maior, maior o prêmio de risco, ou seja, melhor é.

$IS = Rn - Rf / \beta$ 

- Rn = Retorno esperado do Ativo n
- Rf = Retorno esperado do Ativo Livre de Risco)
- &\beta& =  Beta do ativo n

## Black-Scholes

Nesse tutorial mostro como precificar as opções da modalidade europeia através do modelo Black-Scholes-Merlon, ou só Black-Scholes
O Black-Scholes é o modelo de calculo do valor teórico das opções mais conhecido e o mais utilizado pelo mercado para calculo de opções da modalidade europeia, cujo o exercício só pode ser realizado no vencimento.

O foco aqui é explicar apenas como obter os dados e aplicar o modelo em python, não entrarei em detalhes conceituais sobre modelo. Existe ótimos materiais explicando o modelo que podem facilmente ser encontrado na internet. Para aplicar esse método não é necessário entender o modelo

Formulas

![Captura de tela 2025-02-01 215835](https://github.com/user-attachments/assets/7a30b4e3-77ce-4620-990f-864655331619)

- S = Preço da ação
- K = Preço de exericício
- r= Taxa livre de risco anual
- σ= Volatildiade do preço da ação
- T = Tempo em anos até o vencimento
- N = Função distribuição acumulada
- Pcall = Preço da opção de compra
- Pput= Preço da opção de venda

## Value at Risk
O Value at Risk (VaR) é um modelo amplamente utilizado para avaliar o risco financeiro de uma carteira de investimentos, estimando a perda máxima esperada de um portfólio, para um período de tempo específico, para um nível de confiança específico. Existem três abordagens principais para calcular o VaR:

1) VaR Paramétrico (Delta-Normal) = Assume que os retornos dos ativos seguem uma distribuição normal, sendo assim utliza-se da média e do desvio-padrão dos retornos históricos para calcular o VaR.
   
3) VaR Histórico (Backtesting) = Baseia-se nos retornos históricos do portfólio, ou seja, ordena os retornos e encontra o percentil correspondente ao nível de confiança escolhido. Se o nível de confiança for 95%, o VaR será o retorno no 5º percentil dos dados históricos.

6) VaR de Simulação de Monte Carlo = Gera múltiplas simulações de retornos futuros usando processos estocásticos (ex: Modelo de Black-Scholes, GARCH), ou seja, calcula o VaR a partir da distribuição simulada de retornos.

https://www.youtube.com/watch?v=9MSPeAYBYIY&list=WL&index=8
https://www.youtube.com/watch?v=3nNE2kncdyM&list=WL&index=9

https://www.coursera.org/learn/python-statistics-financial-analysis?utm_medium=sem&utm_source=gg&utm_campaign=b2c_latam_x_multi_ftcof_career-academy_cx_dr_bau_gg_pmax_gc_s1-v2_en_m_hyb_24-04_nonNRL-within-14d&campaignid=21239613742&adgroupid=&device=m&keyword=&matchtype=&network=x&devicemodel=&creativeid=&assetgroupid=6501905150&targetid=&extensionid=&placement=&gad_campaignid=21320925518 
